<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kurumsal Dijital Platform</title>
    
    <!-- STÄ°L -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 900: '#1e3a8a' },
                        dark: { 800: '#1e293b', 900: '#0f172a' }
                    }
                }
            }
        }
    </script>
    
    <!-- REACT -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- FIREBASE -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body { background-color: #F8FAFC; }
        
        /* Modern Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94A3B8; }

        /* Kart Hover Efektleri */
        .hover-card { transition: all 0.3s ease; }
        .hover-card:hover { transform: translateY(-4px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); }

        @media print {
            .no-print { display: none !important; }
            body { background: white; }
            .print-area { width: 100%; margin: 0; padding: 0; }
            table { width: 100% !important; border-collapse: collapse; font-size: 10px; border: 1px solid #eee; }
            th, td { border: 1px solid #000 !important; padding: 4px !important; }
            aside, header, .card-view, .modal-overlay { display: none !important; }
        }
        .fixed-table { table-layout: fixed; width: 100%; }
        .wrap-text { word-wrap: break-word; white-space: pre-wrap; }
        
        /* Modal Animasyon */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-overlay { animation: fadeIn 0.2s ease-out; }
    </style>
</head>
<body class="text-slate-800 antialiased">

    <div id="root"></div>

    <script type="text/babel">
        // =================================================================
        // ðŸ”¥ FIREBASE AYARLARI (DÃ¼zeltilmiÅŸ ve Entegre EdilmiÅŸ)
        // =================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyAzF-qtvwK0gszwNupyLC0_Fv2YNZtrMB4",
            authDomain: "kurumsal-asistan.firebaseapp.com",
            projectId: "kurumsal-asistan",
            storageBucket: "kurumsal-asistan.firebasestorage.app",
            messagingSenderId: "1091801269872",
            appId: "1:1091801269872:web:dfc5f6feec7771a85cd6b5",
            measurementId: "G-Z9ES2MSV2Z"
        };

        // --- GÃœVENLÄ° BAÅžLATMA ---
        let db = null;
        let sysError = null;

        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            db = firebase.firestore();
            console.log("Firebase VeritabanÄ± BaÄŸlantÄ±sÄ± BaÅŸarÄ±lÄ±!");
        } catch (e) {
            console.error("BaÅŸlatma HatasÄ±:", e);
            sysError = e.message;
        }

        const { useState, useEffect } = React;

        // --- MODERN Ä°KON SETÄ° ---
        const Icons = {
            Logo: () => <svg className="w-8 h-8 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>,
            Dashboard: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>,
            Users: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
            List: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>,
            Bug: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>,
            Plus: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4v16m8-8H4" /></svg>,
            Trash: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
            LogOut: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>,
            Building: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>,
            Edit: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
            Question: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
            Close: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" /></svg>
        };

        // --- YARDIMCI BÄ°LEÅžENLER ---

        const InfoCard = ({ title, value, color, icon, desc }) => (
            <div className={`bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative group hover:shadow-md transition-all duration-300`}>
                <div className="flex justify-between items-start">
                    <div>
                        <h3 className="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">{title}</h3>
                        <p className="text-3xl font-bold text-slate-800">{value}</p>
                    </div>
                    <div className={`p-2 rounded-lg ${color} bg-opacity-10 text-opacity-100`}>
                        {icon}
                    </div>
                </div>
                <div className="absolute top-3 right-3 has-tooltip cursor-help">
                    <span className="text-slate-300 hover:text-blue-500 transition-colors"><Icons.Question /></span>
                    <div className="tooltip absolute z-50 w-48 p-3 -mt-20 -ml-44 text-xs text-white bg-slate-800 rounded shadow-lg">
                        {desc}
                        <div className="absolute bottom-0 right-4 translate-y-1/2 rotate-45 w-2 h-2 bg-slate-800"></div>
                    </div>
                </div>
            </div>
        );

        // --- LOGIN EKRANI ---
        const LoginScreen = ({ onLogin }) => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                const success = await onLogin(username, password);
                if (!success) setError("KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±!");
                setLoading(false);
            };

            return (
                <div className="min-h-screen flex bg-white">
                    {/* Sol GÃ¶rsel */}
                    <div className="hidden lg:flex lg:w-1/2 bg-brand-600 relative overflow-hidden items-center justify-center">
                        <div className="absolute inset-0 bg-gradient-to-br from-brand-600 to-brand-900 opacity-90"></div>
                        <div className="relative z-10 text-white p-12 max-w-xl">
                            <h1 className="text-5xl font-extrabold mb-6 leading-tight">Kurumsal GeleceÄŸi Birlikte TasarlayalÄ±m.</h1>
                            <p className="text-blue-100 text-lg">Dijital dÃ¶nÃ¼ÅŸÃ¼m sÃ¼reÃ§lerinizi tek bir noktadan yÃ¶netin, analiz edin ve optimize edin.</p>
                        </div>
                        <div className="absolute -bottom-24 -left-24 w-96 h-96 bg-white opacity-10 rounded-full blur-3xl"></div>
                        <div className="absolute top-12 right-12 w-64 h-64 bg-blue-400 opacity-20 rounded-full blur-2xl"></div>
                    </div>

                    {/* SaÄŸ GiriÅŸ Formu */}
                    <div className="w-full lg:w-1/2 flex flex-col items-center justify-center p-8">
                        <div className="w-full max-w-md space-y-8">
                            <div className="text-center">
                                <div className="mx-auto h-12 w-12 bg-brand-50 rounded-xl flex items-center justify-center mb-4">
                                    <Icons.Logo />
                                </div>
                                <h2 className="text-3xl font-bold text-slate-900">GiriÅŸ Yap</h2>
                                <p className="mt-2 text-sm text-slate-500">HesabÄ±nÄ±za eriÅŸmek iÃ§in bilgilerinizi girin</p>
                            </div>

                            <form className="mt-8 space-y-6" onSubmit={handleSubmit}>
                                <div className="space-y-5">
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-1.5">KullanÄ±cÄ± AdÄ±</label>
                                        <input 
                                            type="text" required value={username}
                                            onChange={e => setUsername(e.target.value)}
                                            className="appearance-none relative block w-full px-4 py-3.5 border border-slate-300 placeholder-slate-400 text-slate-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 transition-all" 
                                            placeholder="kurumsal.hesap" 
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-slate-700 mb-1.5">Åžifre</label>
                                        <input 
                                            type="password" required value={password}
                                            onChange={e => setPassword(e.target.value)}
                                            className="appearance-none relative block w-full px-4 py-3.5 border border-slate-300 placeholder-slate-400 text-slate-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 transition-all" 
                                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                                        />
                                    </div>
                                </div>
                                {error && (
                                    <div className="text-red-600 text-sm bg-red-50 p-3 rounded-lg flex items-center gap-2">
                                        <span className="font-bold">!</span> {error}
                                    </div>
                                )}
                                <div>
                                    <button 
                                        type="submit" disabled={loading}
                                        className="w-full flex justify-center py-3.5 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-brand-600 hover:bg-brand-700 transition-all shadow-lg shadow-brand-500/30 disabled:opacity-70"
                                    >
                                        {loading ? 'GiriÅŸ YapÄ±lÄ±yor...' : 'Devam Et'}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        // --- ADMIN DASHBOARD (GeliÅŸtirilmiÅŸ KullanÄ±cÄ± YÃ¶netimi) ---
        const AdminDashboard = ({ users, processes, feedbacks, departments, onAddUser, onDeleteUser, onUpdateUser, onAddDept, onUpdateFeedback, onDeleteFeedback }) => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [filterDept, setFilterDept] = useState('TÃ¼mÃ¼');
            const [filterPersonnel, setFilterPersonnel] = useState('TÃ¼mÃ¼');
            
            // KullanÄ±cÄ± Ekleme/DÃ¼zenleme State'leri
            const [newDeptName, setNewDeptName] = useState('');
            const [newUser, setNewUser] = useState({ name:'', username:'', password:'', dept:'' });
            const [editingUser, setEditingUser] = useState(null); // DÃ¼zenlenen kullanÄ±cÄ±

            // Ä°statistikler
            const stats = [
                { title: 'Personel', value: users.filter(u=>u.role!=='admin').length, bg: 'bg-blue-50', text: 'text-blue-600', icon: <Icons.Users/> },
                { title: 'Departman', value: departments.length, bg: 'bg-purple-50', text: 'text-purple-600', icon: <Icons.Building/> },
                { title: 'Toplam Veri', value: processes.length, bg: 'bg-emerald-50', text: 'text-emerald-600', icon: <Icons.List/> },
                { title: 'Bekleyen', value: feedbacks.filter(f=>f.status==='Bekliyor').length, bg: 'bg-amber-50', text: 'text-amber-600', icon: <Icons.Bug/> },
            ];

            const filteredProcesses = processes.filter(p => {
                const deptMatch = filterDept === 'TÃ¼mÃ¼' || p.dept === filterDept;
                const persMatch = filterPersonnel === 'TÃ¼mÃ¼' || p.actor === filterPersonnel;
                return deptMatch && persMatch;
            });

            const handleEditClick = (user) => {
                setEditingUser({ ...user });
            };

            const handleUpdateUser = () => {
                if(!editingUser.name || !editingUser.username || !editingUser.password) return alert("Bilgiler boÅŸ olamaz.");
                onUpdateUser(editingUser.id, {
                    name: editingUser.name,
                    username: editingUser.username,
                    password: editingUser.password,
                    dept: editingUser.dept
                });
                setEditingUser(null);
            };

            return (
                <div className="flex flex-col h-full">
                    {/* MenÃ¼ */}
                    <div className="bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex items-center gap-8 sticky top-0 z-20 no-print">
                         {['dashboard', 'users', 'processes', 'feedbacks'].map(tab => (
                            <button 
                                key={tab} 
                                onClick={()=>setActiveTab(tab)} 
                                className={`relative py-2 text-sm font-medium transition-colors ${activeTab===tab ? 'text-brand-600' : 'text-slate-500 hover:text-slate-800'}`}
                            >
                                {tab === 'dashboard' ? 'Genel BakÄ±ÅŸ' : tab === 'users' ? 'Organizasyon' : tab === 'processes' ? 'Master Veri' : 'Bildirim Merkezi'}
                                {activeTab === tab && <span className="absolute bottom-0 left-0 w-full h-0.5 bg-brand-600 rounded-full"></span>}
                            </button>
                        ))}
                    </div>

                    <div className="flex-1 overflow-y-auto p-8">
                        
                        {/* DASHBOARD */}
                        {activeTab === 'dashboard' && (
                            <div className="space-y-8 animate-fade-in">
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {stats.map((s, i) => (
                                        <div key={i} className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover-card">
                                            <div className="flex justify-between items-start">
                                                <div>
                                                    <p className="text-slate-500 text-xs font-bold uppercase tracking-wider">{s.title}</p>
                                                    <h3 className="text-3xl font-extrabold text-slate-800 mt-2">{s.value}</h3>
                                                </div>
                                                <div className={`p-3 rounded-xl ${s.bg} ${s.text}`}>{s.icon}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* ORGANÄ°ZASYON (YetkilendirilmiÅŸ KullanÄ±cÄ± YÃ¶netimi) */}
                        {activeTab === 'users' && (
                            <div className="space-y-8">
                                {/* Departmanlar */}
                                <section>
                                    <div className="flex justify-between items-end mb-4">
                                        <h3 className="text-xl font-bold text-slate-800">Departmanlar</h3>
                                        <button onClick={()=>{const d = prompt("Departman AdÄ±:"); if(d) onAddDept(d)}} className="text-brand-600 text-sm font-bold hover:bg-brand-50 px-3 py-1 rounded-lg transition-colors">+ Yeni Ekle</button>
                                    </div>
                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {departments.map((d, i) => (
                                            <div key={i} className="bg-gradient-to-br from-white to-slate-50 p-6 rounded-2xl border border-slate-200 hover:border-brand-200 hover:shadow-lg transition-all relative overflow-hidden">
                                                <div className="absolute top-0 right-0 w-24 h-24 bg-brand-500 opacity-5 rounded-full -mr-10 -mt-10"></div>
                                                <div className="relative z-10">
                                                    <div className="w-10 h-10 bg-white rounded-lg shadow-sm flex items-center justify-center mb-4 text-brand-600">
                                                        <Icons.Building />
                                                    </div>
                                                    <h4 className="font-bold text-lg text-slate-800">{d}</h4>
                                                    <p className="text-xs text-slate-500 mt-1">{users.filter(u => u.dept === d).length} Personel</p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </section>

                                {/* Personel YÃ¶netimi */}
                                <section className="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                                    <div className="p-6 border-b border-slate-100 flex justify-between items-center">
                                        <h3 className="font-bold text-lg text-slate-800">Personel Listesi</h3>
                                        <button onClick={()=>{
                                            const name = prompt("Ad Soyad:");
                                            const username = prompt("KullanÄ±cÄ± AdÄ±:");
                                            const password = prompt("Åžifre:");
                                            const dept = prompt("Departman (Listeden):", departments[0]);
                                            if(name && username && password) onAddUser({name, username, password, dept});
                                        }} className="bg-brand-600 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-brand-200 hover:bg-brand-700 transition-colors">Personel Ekle</button>
                                    </div>
                                    <table className="w-full text-left text-sm">
                                        <thead className="bg-slate-50 text-slate-500 font-medium">
                                            <tr>
                                                <th className="p-4">Ad Soyad</th>
                                                <th className="p-4">KullanÄ±cÄ± AdÄ±</th>
                                                <th className="p-4">Departman</th>
                                                <th className="p-4">Åžifre</th>
                                                <th className="p-4 text-right">Ä°ÅŸlemler</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100">
                                            {users.filter(u=>u.role!=='admin').map(u=>(
                                                <tr key={u.id} className="hover:bg-slate-50 transition-colors">
                                                    <td className="p-4 font-medium text-slate-900">{u.name}</td>
                                                    <td className="p-4 text-slate-500">{u.username}</td>
                                                    <td className="p-4"><span className="px-2 py-1 bg-slate-100 rounded text-xs font-semibold text-slate-600">{u.dept}</span></td>
                                                    <td className="p-4 font-mono text-xs text-slate-400">{u.password}</td>
                                                    <td className="p-4 text-right flex justify-end gap-2">
                                                        <button onClick={()=>handleEditClick(u)} className="text-blue-400 hover:text-blue-600 bg-blue-50 hover:bg-blue-100 p-2 rounded-lg transition-colors" title="DÃ¼zenle">
                                                            <Icons.Edit/>
                                                        </button>
                                                        <button onClick={()=>{if(confirm(u.name + " kullanÄ±cÄ±sÄ±nÄ± silmek istiyor musunuz?")) onDeleteUser(u.id)}} className="text-red-400 hover:text-red-600 bg-red-50 hover:bg-red-100 p-2 rounded-lg transition-colors" title="Sil">
                                                            <Icons.Trash/>
                                                        </button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </section>
                            </div>
                        )}

                        {/* KullanÄ±cÄ± DÃ¼zenleme ModalÄ± */}
                        {editingUser && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 modal-overlay">
                                <div className="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md">
                                    <div className="flex justify-between items-center mb-6">
                                        <h3 className="text-xl font-bold text-slate-800">KullanÄ±cÄ± DÃ¼zenle</h3>
                                        <button onClick={()=>setEditingUser(null)} className="text-slate-400 hover:text-slate-600"><Icons.Close/></button>
                                    </div>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">AD SOYAD</label>
                                            <input value={editingUser.name} onChange={e=>setEditingUser({...editingUser, name:e.target.value})} className="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-brand-500" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">KULLANICI ADI</label>
                                            <input value={editingUser.username} onChange={e=>setEditingUser({...editingUser, username:e.target.value})} className="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-brand-500" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">ÅžÄ°FRE</label>
                                            <input value={editingUser.password} onChange={e=>setEditingUser({...editingUser, password:e.target.value})} className="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-brand-500" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">DEPARTMAN</label>
                                            <select value={editingUser.dept} onChange={e=>setEditingUser({...editingUser, dept:e.target.value})} className="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-brand-500 bg-white">
                                                {departments.map(d=><option key={d} value={d}>{d}</option>)}
                                            </select>
                                        </div>
                                        <button onClick={handleUpdateUser} className="w-full bg-brand-600 text-white py-3 rounded-xl font-bold hover:bg-brand-700 mt-2">DeÄŸiÅŸiklikleri Kaydet</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* MASTER SÃœREÃ‡LER */}
                        {activeTab === 'processes' && (
                            <div className="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                                <div className="p-6 border-b border-slate-100 flex justify-between items-center no-print">
                                    <h3 className="font-bold text-lg text-slate-800">TÃ¼m SÃ¼reÃ§ VeritabanÄ±</h3>
                                    <div className="flex gap-2 items-center">
                                        <div className="flex items-center gap-2 bg-slate-50 p-1 rounded-lg border">
                                            <select value={filterDept} onChange={e=>setFilterDept(e.target.value)} className="bg-transparent text-sm p-1 outline-none"><option value="TÃ¼mÃ¼">TÃ¼m Departmanlar</option>{departments.map(d=><option key={d} value={d}>{d}</option>)}</select>
                                            <div className="w-px h-4 bg-slate-300"></div>
                                            <select value={filterPersonnel} onChange={e=>setFilterPersonnel(e.target.value)} className="bg-transparent text-sm p-1 outline-none"><option value="TÃ¼mÃ¼">TÃ¼m Personel</option>{users.filter(u=>u.role!=='admin').map(u=><option key={u.id} value={u.name}>{u.name}</option>)}</select>
                                        </div>
                                        <button onClick={()=>window.print()} className="bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-bold">Rapor Al</button>
                                    </div>
                                </div>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-left text-xs border-collapse">
                                        <thead className="bg-slate-50 text-slate-500 uppercase font-bold">
                                            <tr>
                                                <th className="p-4 border-b">Kod</th>
                                                <th className="p-4 border-b">Tarih</th>
                                                <th className="p-4 border-b">Personel</th>
                                                <th className="p-4 border-b">Aksiyon</th>
                                                <th className="p-4 border-b">Sistem</th>
                                                <th className="p-4 border-b">Risk</th>
                                                <th className="p-4 border-b no-print">Sil</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100">
                                            {filteredProcesses.map(p=>(
                                                <tr key={p.id} className="hover:bg-blue-50/50">
                                                    <td className="p-4 font-mono text-brand-600">{p.smartID}</td>
                                                    <td className="p-4 text-slate-500">{p.displayDate}</td>
                                                    <td className="p-4 font-bold text-slate-700">{p.actor}<br/><span className="font-normal text-slate-400 text-[10px]">{p.dept}</span></td>
                                                    <td className="p-4 wrap-text max-w-md">{p.action}</td>
                                                    <td className="p-4">{p.system}</td>
                                                    <td className="p-4 text-red-500 wrap-text max-w-xs">{p.mistakes}</td>
                                                    <td className="p-4 text-center no-print">
                                                        <button onClick={()=>{if(confirm("Bu kaydÄ± silmek istediÄŸine emin misin?")) onDeleteProcess(p.id)}} className="text-slate-300 hover:text-red-600"><Icons.Trash/></button>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}

                        {/* BÄ°LDÄ°RÄ°M MERKEZÄ° */}
                        {activeTab === 'feedbacks' && (
                            <div className="space-y-6">
                                <h3 className="text-xl font-bold text-slate-800">Gelen Bildirimler</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                                    {feedbacks.map(f => (
                                        <div key={f.id} className={`bg-white rounded-2xl p-6 border-l-4 shadow-sm hover:shadow-md transition-all relative group ${
                                            f.priority === 'Kritik' ? 'border-l-red-500' : 
                                            f.priority === 'YÃ¼ksek' ? 'border-l-orange-500' : 
                                            'border-l-blue-500'
                                        }`}>
                                            <div className="flex justify-between items-start mb-4">
                                                <div className="flex items-center gap-2">
                                                    <span className={`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide ${f.type==='Hata'?'bg-red-50 text-red-600':'bg-blue-50 text-blue-600'}`}>{f.type}</span>
                                                    <span className="text-xs text-slate-400 font-medium">{f.priority}</span>
                                                </div>
                                                <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                                    f.status==='Bekliyor' ? 'bg-amber-100 text-amber-700' :
                                                    f.status==='Ä°nceleniyor' ? 'bg-blue-100 text-blue-700' :
                                                    'bg-emerald-100 text-emerald-700'
                                                }`}>{f.status}</span>
                                            </div>

                                            <h4 className="font-bold text-slate-800 text-lg mb-2 line-clamp-1" title={f.subject}>{f.subject}</h4>
                                            <p className="text-sm text-slate-500 mb-4 line-clamp-3 h-14">{f.desc}</p>

                                            <div className="flex items-center justify-between pt-4 border-t border-slate-100 mt-2">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600">
                                                        {f.reporter.charAt(0)}
                                                    </div>
                                                    <div className="text-xs">
                                                        <p className="font-bold text-slate-700">{f.reporter}</p>
                                                        <p className="text-slate-400">{f.dept}</p>
                                                    </div>
                                                </div>
                                                <div className="flex gap-2">
                                                    {f.status !== 'TamamlandÄ±' && (
                                                        <button onClick={()=>onUpdateFeedback(f.id, f.status==='Bekliyor'?'Ä°nceleniyor':'TamamlandÄ±')} className="text-xs bg-slate-900 text-white px-3 py-1.5 rounded-lg hover:bg-slate-700 transition-colors">
                                                            {f.status==='Bekliyor' ? 'Ä°ncele' : 'Kapat'}
                                                        </button>
                                                    )}
                                                    <button onClick={()=>{if(confirm("Bu bildirimi silmek istediÄŸine emin misin?")) onDeleteFeedback(f.id)}} className="text-xs bg-red-50 text-red-600 px-2 py-1.5 rounded-lg hover:bg-red-100 transition-colors" title="Sil">
                                                        <Icons.Trash />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- PERSONEL PANELÄ° (AkÄ±llÄ± Kodlu) ---
        const EmployeeDashboard = ({ currentUser, onAddProcess, onAddFeedback, userProcesses, userFeedbacks, onDeleteProcess }) => {
            const [activeTab, setActiveTab] = useState('entry');
            const [pForm, setPForm] = useState({
                trigger: '', action: '', type: 'Operasyonel', system: '', inputs: '', outputs: '', 
                duration: '', frequency: '', decision: '', rules: '', knowledge: '', mistakes: '' 
            });
            const [fForm, setFForm] = useState({ type: 'Ä°yileÅŸtirme', subject: '', desc: '', priority: 'Orta', impact: 'Zaman' });

            const generateSmartID = (type) => {
                const prefix = type === 'YÃ¶netimsel' ? 'YNT' : type === 'Destek' ? 'DST' : 'OPR';
                const random = Math.floor(Math.random() * 90000) + 10000;
                return `${prefix}-${random}`;
            };

            const handleProcessSubmit = () => {
                if(!pForm.action) return alert("LÃ¼tfen yapÄ±lan iÅŸlemi (Aksiyon) aÃ§Ä±klayÄ±nÄ±z.");
                const smartID = generateSmartID(pForm.type);
                const now = new Date();
                onAddProcess({ 
                    ...pForm, actor: currentUser.name, dept: currentUser.dept, 
                    createdAt: now.toISOString(), displayDate: now.toLocaleDateString('tr-TR') + ' ' + now.toLocaleTimeString('tr-TR').slice(0,5), smartID 
                });
                setPForm(prev => ({ ...prev, action:'', inputs:'', outputs:'', duration:'', decision:'', rules:'', knowledge:'', mistakes:'' }));
            };

            const handleFeedbackSubmit = () => {
                if(!fForm.subject) return alert("Konu gerekli.");
                onAddFeedback({ ...fForm, reporter: currentUser.name, dept: currentUser.dept });
                setFForm({ type:'Ä°yileÅŸtirme', subject:'', desc:'', priority:'Orta', impact:'Zaman' });
                alert("Bildiriminiz yÃ¶neticilere iletildi.");
            };

            const sendMail = () => {
                if(userProcesses.length === 0) return alert("Liste boÅŸ.");
                let body = `SÃœREÃ‡ RAPORU\nPersonel: ${currentUser.name}\nDepartman: ${currentUser.dept}\n\n`;
                userProcesses.forEach((p, i) => {
                    body += `${i+1}. [${p.smartID}] ${p.action}\nSÃ¼re: ${p.duration} | SÄ±klÄ±k: ${p.frequency}\nSistem: ${p.system}\nRisk: ${p.mistakes}\n\n`;
                });
                window.location.href = `mailto:misalperenates@gmail.com?subject=${encodeURIComponent(`Rapor - ${currentUser.dept} - ${currentUser.name}`)}&body=${encodeURIComponent(body)}`;
            };

            return (
                <div className="flex flex-col h-full bg-[#F8FAFC]">
                    <div className="bg-white border-b border-slate-200 px-8 py-4 flex gap-8 overflow-x-auto no-print sticky top-0 z-10">
                        <button onClick={()=>setActiveTab('entry')} className={`flex items-center gap-2 pb-1 text-sm font-semibold transition-colors ${activeTab==='entry'?'text-blue-600 border-b-2 border-blue-600':'text-slate-500 hover:text-slate-700'}`}><Icons.List/> SÃ¼reÃ§ Veri GiriÅŸi</button>
                        <button onClick={()=>setActiveTab('feedback')} className={`flex items-center gap-2 pb-1 text-sm font-semibold transition-colors ${activeTab==='feedback'?'text-blue-600 border-b-2 border-blue-600':'text-slate-500 hover:text-slate-700'}`}><Icons.Bug/> Bildirim & Ã–neri</button>
                    </div>

                    <div className="flex-1 overflow-y-auto p-8">
                        {activeTab === 'entry' && (
                            <div className="grid grid-cols-1 xl:grid-cols-3 gap-8">
                                <div className="xl:col-span-1 bg-white p-6 rounded-2xl shadow-sm border border-slate-100 h-fit">
                                    <h3 className="font-bold text-lg mb-6 text-slate-800 flex items-center gap-2">
                                        <span className="bg-blue-100 text-blue-600 p-1.5 rounded-lg"><Icons.Plus/></span> Yeni Ä°ÅŸlem KaydÄ±
                                    </h3>
                                    <div className="space-y-5">
                                        <div className="space-y-3">
                                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wider">1. Ä°ÅŸlem TanÄ±mÄ±</label>
                                            <textarea value={pForm.action} onChange={e=>setPForm({...pForm, action:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl focus:bg-white focus:ring-2 focus:ring-blue-500 outline-none transition-all" rows="3" placeholder="Ne yapÄ±yorsunuz?"></textarea>
                                            <div className="grid grid-cols-2 gap-3">
                                                <input value={pForm.trigger} onChange={e=>setPForm({...pForm, trigger:e.target.value})} className="border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm focus:bg-white outline-none" placeholder="Tetikleyici" />
                                                <select value={pForm.type} onChange={e=>setPForm({...pForm, type:e.target.value})} className="border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm focus:bg-white outline-none">
                                                    <option>Operasyonel</option>
                                                    <option>YÃ¶netimsel</option>
                                                    <option>Destek</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div className="space-y-3">
                                            <label className="text-xs font-bold text-slate-400 uppercase tracking-wider">2. Sistem & Metrikler</label>
                                            <input value={pForm.system} onChange={e=>setPForm({...pForm, system:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm focus:bg-white outline-none" placeholder="KullanÄ±lan YazÄ±lÄ±m / AraÃ§" />
                                            <div className="grid grid-cols-2 gap-3">
                                                <input value={pForm.duration} onChange={e=>setPForm({...pForm, duration:e.target.value})} className="border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm focus:bg-white outline-none" placeholder="SÃ¼re" />
                                                <input value={pForm.frequency} onChange={e=>setPForm({...pForm, frequency:e.target.value})} className="border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm focus:bg-white outline-none" placeholder="SÄ±klÄ±k" />
                                            </div>
                                        </div>
                                        <div className="bg-yellow-50/50 p-4 rounded-xl border border-yellow-100 space-y-3">
                                            <label className="text-xs font-bold text-yellow-700 uppercase tracking-wider flex items-center gap-1"><Icons.Bug/> Kurumsal HafÄ±za</label>
                                            <input value={pForm.knowledge} onChange={e=>setPForm({...pForm, knowledge:e.target.value})} className="w-full border border-yellow-200 bg-white p-3 rounded-xl text-sm focus:ring-1 focus:ring-yellow-400 outline-none" placeholder="PÃ¼f NoktasÄ±" />
                                            <input value={pForm.mistakes} onChange={e=>setPForm({...pForm, mistakes:e.target.value})} className="w-full border border-yellow-200 bg-white p-3 rounded-xl text-sm focus:ring-1 focus:ring-yellow-400 outline-none" placeholder="Risk / Hata" />
                                        </div>
                                        <button onClick={handleProcessSubmit} className="w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition-transform active:scale-95 shadow-md">Listeye Ekle</button>
                                    </div>
                                </div>

                                <div className="xl:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-100 min-h-[600px]">
                                    <div className="flex justify-between items-center mb-6">
                                        <div>
                                            <h3 className="font-bold text-slate-800 text-lg">GÃ¼nlÃ¼k SÃ¼reÃ§ Listesi</h3>
                                            <p className="text-xs text-slate-400">Eklenen: {userProcesses.length}</p>
                                        </div>
                                        <div className="flex gap-2 no-print">
                                            <button onClick={sendMail} className="bg-blue-50 text-blue-600 hover:bg-blue-100 px-4 py-2 rounded-lg text-sm font-bold transition-colors">Mail At</button>
                                            <button onClick={()=>window.print()} className="bg-slate-50 text-slate-600 hover:bg-slate-100 px-4 py-2 rounded-lg text-sm font-bold transition-colors">PDF</button>
                                        </div>
                                    </div>
                                    {userProcesses.length===0 ? <div className="flex flex-col items-center justify-center h-96 text-slate-300 border-2 border-dashed border-slate-100 rounded-xl"><Icons.List/><p className="mt-2 font-medium">HenÃ¼z veri girilmedi.</p></div> : (
                                        <div className="overflow-x-auto">
                                            <table className="w-full text-sm text-left border-separate border-spacing-y-2">
                                                <thead className="text-xs text-slate-400 uppercase font-semibold"><tr><th className="px-4 pb-2">Kod</th><th className="px-4 pb-2">Aksiyon</th><th className="px-4 pb-2">Sistem</th><th className="px-4 pb-2">Risk</th><th className="px-4 pb-2 w-10"></th></tr></thead>
                                                <tbody>
                                                    {userProcesses.map(p=>(
                                                        <tr key={p.id} className="bg-white hover:bg-slate-50 transition-colors group shadow-sm">
                                                            <td className="p-4 rounded-l-xl border-y border-l border-slate-100 font-mono text-xs text-blue-600">{p.smartID}</td>
                                                            <td className="p-4 border-y border-slate-100 font-medium text-slate-700 wrap-text">{p.action}</td>
                                                            <td className="p-4 border-y border-slate-100 text-slate-500">{p.system}</td>
                                                            <td className="p-4 border-y border-slate-100 text-red-500 text-xs italic wrap-text">{p.mistakes}</td>
                                                            <td className="p-4 rounded-r-xl border-y border-r border-slate-100 text-center no-print"><button onClick={()=>onDeleteProcess(p.id)} className="text-slate-300 hover:text-red-500 transition-colors"><Icons.Trash/></button></td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                        {activeTab === 'feedback' && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 h-fit">
                                    <h3 className="font-bold text-lg mb-6 text-slate-800 flex items-center gap-2"><Icons.Bug/> Ä°yileÅŸtirme Bildir</h3>
                                    <div className="space-y-5">
                                        <div className="grid grid-cols-2 gap-4">
                                            <div><label className="block text-xs font-bold text-slate-400 mb-1">TÃœR</label><select value={fForm.type} onChange={e=>setFForm({...fForm, type:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm outline-none"><option>Ä°yileÅŸtirme</option><option>Hata (Bug)</option><option>DarboÄŸaz</option></select></div>
                                            <div><label className="block text-xs font-bold text-slate-400 mb-1">ETKÄ°</label><select value={fForm.impact} onChange={e=>setFForm({...fForm, impact:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm outline-none"><option>Zaman</option><option>Maliyet</option><option>Kalite</option></select></div>
                                        </div>
                                        <div><label className="block text-xs font-bold text-slate-400 mb-1">KONU</label><input value={fForm.subject} onChange={e=>setFForm({...fForm, subject:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm outline-none" /></div>
                                        <div><label className="block text-xs font-bold text-slate-400 mb-1">AÃ‡IKLAMA</label><textarea value={fForm.desc} onChange={e=>setFForm({...fForm, desc:e.target.value})} className="w-full border border-slate-200 bg-slate-50 p-3 rounded-xl text-sm outline-none" rows="4"></textarea></div>
                                        <button onClick={handleFeedbackSubmit} className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors shadow-lg">GÃ¶nder</button>
                                    </div>
                                </div>
                                <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-100">
                                    <h3 className="font-bold text-lg mb-6 text-slate-800">Bildirimlerim</h3>
                                    <div className="space-y-4">
                                        {userFeedbacks.map(f=>(
                                            <div key={f.id} className="border border-slate-100 p-4 rounded-xl bg-slate-50">
                                                <div className="flex justify-between items-start mb-2"><span className="text-xs font-bold px-2 py-1 rounded bg-blue-100 text-blue-600">{f.type}</span><span className="text-xs font-bold px-2 py-1 rounded bg-gray-200">{f.status}</span></div>
                                                <h4 className="font-bold text-slate-700">{f.subject}</h4>
                                                <p className="text-xs text-slate-500 mt-1">{f.desc}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- ANA UYGULAMA ---
        const App = () => {
            if (sysError) return <div className="h-screen flex items-center justify-center text-red-600 bg-red-50 p-10 text-center font-bold">{sysError}</div>;

            const [user, setUser] = useState(null);
            const [usersData, setUsersData] = useState([]);
            const [processes, setProcesses] = useState([]);
            const [feedbacks, setFeedbacks] = useState([]);
            const [departments, setDepartments] = useState(['IT', 'SatÄ±ÅŸ', 'Ä°K']);

            useEffect(() => {
                if (!db) return;
                const unsubUsers = db.collection('users').onSnapshot(snap => {
                    const u = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    if(u.length===0) db.collection('users').add({ name:'YÃ¶netici', username:'admin', password:'12345', role:'admin', dept:'IT' });
                    else setUsersData(u);
                });
                const unsubProc = db.collection('processes').orderBy('createdAt', 'desc').onSnapshot(snap => setProcesses(snap.docs.map(d => ({ id: d.id, ...d.data() }))));
                const unsubFeed = db.collection('feedbacks').onSnapshot(snap => setFeedbacks(snap.docs.map(d => ({ id: d.id, ...d.data() }))));
                const unsubDepts = db.collection('departments').onSnapshot(snap => {
                     const d = snap.docs.map(doc => doc.data().name);
                     if(d.length > 0) setDepartments(d);
                });
                return () => { unsubUsers(); unsubProc(); unsubFeed(); unsubDepts(); };
            }, []);

            const handleLogin = async (u, p) => {
                const found = usersData.find(usr => usr.username === u && usr.password === p);
                if (found) { setUser(found); return true; }
                return false;
            };

            // CRUD Ä°ÅžLEMLERÄ°
            const addProcess = (p) => db.collection('processes').add(p);
            const delProcess = (id) => db.collection('processes').doc(id).delete();
            const addUser = (u) => db.collection('users').add({ ...u, role: 'employee' });
            const delUser = (id) => db.collection('users').doc(id).delete();
            const updateUser = (id, data) => db.collection('users').doc(id).update(data); // GÃœNCELLEME EKLENDÄ°
            const addFeedback = (f) => db.collection('feedbacks').add({ ...f, status: 'Bekliyor' });
            const updFeedback = (id, status) => db.collection('feedbacks').doc(id).update({ status });
            const delFeedback = (id) => db.collection('feedbacks').doc(id).delete(); // SÄ°LME EKLENDÄ°
            const addDept = (name) => db.collection('departments').add({name});

            if (!user) return <LoginScreen onLogin={handleLogin} />;

            return (
                <div className="flex flex-col h-screen overflow-hidden">
                    {/* Ana Header */}
                    <header className="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-8 shadow-sm z-30 no-print">
                        <div className="flex items-center gap-3">
                            <div className="bg-brand-600 text-white p-1.5 rounded-lg shadow-lg shadow-brand-500/30"><Icons.Logo/></div>
                            <span className="font-bold text-lg text-slate-800 tracking-tight">Kurumsal<span className="text-brand-600">Asistan</span></span>
                        </div>
                        <div className="flex items-center gap-6">
                            <div className="text-right hidden sm:block">
                                <p className="text-sm font-bold text-slate-700">{user.name}</p>
                                <p className="text-xs text-slate-400 font-medium">{user.role === 'admin' ? 'Sistem YÃ¶neticisi' : user.dept}</p>
                            </div>
                            <button onClick={()=>setUser(null)} className="text-slate-400 hover:text-red-600 transition-colors"><Icons.LogOut/></button>
                        </div>
                    </header>

                    <main className="flex-1 overflow-hidden relative">
                        {user.role === 'admin' ? (
                            <AdminDashboard 
                                users={usersData} processes={processes} feedbacks={feedbacks} departments={departments}
                                onAddUser={addUser} onDeleteUser={delUser} onUpdateUser={updateUser} onAddDept={addDept} onUpdateFeedback={updFeedback} onDeleteFeedback={delFeedback} onDeleteProcess={delProcess}
                            />
                        ) : (
                            <EmployeeDashboard 
                                currentUser={user} 
                                userProcesses={processes.filter(p => p.actor === user.name)}
                                userFeedbacks={feedbacks.filter(f => f.reporter === user.name)}
                                onAddProcess={addProcess} onDeleteProcess={delProcess} onAddFeedback={addFeedback}
                            />
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>